{"ast":null,"code":"import * as signalR from '@microsoft/signalr';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let SignalRService = /*#__PURE__*/(() => {\n  class SignalRService {\n    constructor() {\n      this._users = new BehaviorSubject(new Set());\n      this.users$ = this._users.asObservable(); // $ indica que é um Observable\n    }\n    startConnection() {\n      this.hubConnection = new signalR.HubConnectionBuilder().withUrl('https://localhost:7220/chatHub').build();\n      this.hubConnection.start().then(() => console.log('Connection started')).catch(err => console.log('Error while starting connection: ' + err));\n      this.hubConnection.on('UserConnected', userId => {\n        const updatedUsers = new Set(this._users.value);\n        updatedUsers.add(userId);\n        this._users.next(updatedUsers);\n        console.log(\"service = \" + userId);\n      });\n      this.hubConnection.on('UserDisconnected', userId => {\n        const updatedUsers = new Set(this._users.value);\n        updatedUsers.delete(userId);\n        this._users.next(updatedUsers);\n      });\n    }\n    static #_ = this.ɵfac = function SignalRService_Factory(t) {\n      return new (t || SignalRService)();\n    };\n    static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: SignalRService,\n      factory: SignalRService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return SignalRService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}